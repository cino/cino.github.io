<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Static website distribution with AWS CloudFront - Cino</title><meta name=description content="A short guide on how to create a static website on AWS while only using serverless services!"><link rel=icon type=image/x-icon href=https://cino.github.io/favicon.ico><link rel=apple-touch-icon-precomposed href=https://cino.github.io/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://cino.github.io/css/style.min.aac3b3a2a3235d20a652d9ccde7ec59be09f74c45de387513f681d02f3912b95.css integrity="sha256-qsOzoqMjXSCmUtnM3n7Fm+CfdMRd44dRP2gdAvORK5U="><script src=https://cino.github.io/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="Static website distribution with AWS CloudFront"><meta property="og:description" content="A short guide on how to create a static website on AWS while only using serverless services!"><meta property="og:type" content="article"><meta property="og:url" content="https://cino.github.io/posts/static-website-distribution-with-aws-cloudfront/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-11T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Static website distribution with AWS CloudFront"><meta name=twitter:description content="A short guide on how to create a static website on AWS while only using serverless services!"></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><h1 class=site-title><a href=/>Cino</a></h1><ul class=social-icons><li><a href=https://github.com/cino title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href=https://twitter.com/ricardocino title=Twitter rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a></li><li><a href=https://cino.github.io/index.xml title=RSS rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></span></a></li></ul></div><nav><a href=https://cino.github.io/ title=Home>Home</a>
<a href=https://cino.github.io/about/ title="About me">About me</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">Static website distribution with AWS CloudFront</h1></header></div><div class="content e-content"><p>Having only written about PHP and Servers in the past I am making the switch to Serverless. This has been a long-time wish for me and finally realized this in a personal but also professional environment. That being said, I plan on writing a lot of new content on the blog purely around setting up applications with a serverless mindset, built with AWS CDK (AWS Cloud Development Kit). I will include diagrams and/or flowcharts to explain what is happening and of course, include the source code in a public GitHub repository.</p><p>The bigger goal for me is to develop a proper application on nothing but serverless services from Amazon to train my skillset and also share the process that I went through.</p><h2 id=before-we-get-started>Before we get started
<span><a href=#before-we-get-started><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>First things first, the way I&rsquo;m making my content won&rsquo;t be a step-by-step guide. At this point, I assume you are at least familiar with Amazon Web Services, Infrastructure as Code and read up at least a little about the <a href=https://docs.aws.amazon.com/cdk/v2/guide/home.html>Cloud Development Kit</a>.</p><p>At this moment you should already have the following tools installed:</p><ul><li>Node/NPM</li><li>Typescript</li><li>AWS CDK</li></ul><h2 id=what-are-we-building>What are we building?
<span><a href=#what-are-we-building><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>The easiest project to experiment with serverless on AWS is with a basic static website. Let&rsquo;s say you only have some HTML/JS/CSS files, we can easily host the website with Amazon S3 + Amazon CloudFront. That means we have a storage provider where we can store our files and a service that helps us serve the files to the visitors. As a bonus, CloudFront serves as a Content Delivery Network which means the files are cached over multiple regions in the world if necessary.</p><p>For this particular example, I&rsquo;ve chosen <strong>not</strong> to use a custom domain for the CloudFront distribution. Because at the moment, I don&rsquo;t have a hosted zone setup within AWS and it doesn&rsquo;t really add value at this point.</p><p>How this would work from a user perspective is quite simple, whenever the user requests an object it would first check if it exists in the cache. When it does, it is as returning the cached file. When it is not in the cache, that&rsquo;s when CloudFront checks if it exists in the origin (S3 in our case) and acts depending on if it is found or not.</p><img src=/img/static-website-distribution-with-aws-cloudfront/flowchart-static-website-distribution-with-aws-cloudfront.drawio.png><h2 id=infrastructure-as-code>Infrastructure as Code
<span><a href=#infrastructure-as-code><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>As a best practice, you should use infrastructure as code as much as possible. As said earlier my preferred tool at the moment would be the AWS CDK and this is what I&rsquo;ll show today on how I&rsquo;ve set this up. I&rsquo;ll be going over the main stack I&rsquo;ve created in CDK which can be found <a href=https://github.com/cino/cdk-static-serverless/blob/initial-static-website/lib/cdk-static-serverless-stack.ts>here</a> for those who like to read along.</p><p>To start we need to create an S3 Bucket where all our files will be stored. In the example, we will just be storing an index.html and a favicon.ico. As you can see below, we kept it really simple.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bucket</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Bucket</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#39;StaticWebsiteBucket&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>bucketName</span>: <span style=color:#66d9ef>Stack.of</span>(<span style=color:#66d9ef>this</span>).<span style=color:#a6e22e>account</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-static-website-test&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>websiteIndexDocument</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;index.html&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>publicReadAccess</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blockPublicAccess</span>: <span style=color:#66d9ef>s3.BlockPublicAccess.BLOCK_ALL</span>,
</span></span><span style=display:flex><span>});</span></span></code></pre></div><p>The only notable comment here is that we disable public access to the bucket which is an actual best practice. Every time you create a bucket: make it private. If you do need it to be public, really ask yourself if it&rsquo;s necessary. In our current situation, all our files are publicly accessible but only when visiting from our CloudFront distribution.</p><p>After we&rsquo;ve created our S3 Bucket we are going to allow access with an Origin Access Identity where we are basically going to allow CloudFront to access all our files in the S3 Bucket but only on the <code>s3:GetObject</code> action. Just retrieving the files and nothing else.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cloudfrontOAI</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>cloudfront</span>.<span style=color:#a6e22e>OriginAccessIdentity</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#39;cloudfront-OAI&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>comment</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`OAI for </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>bucket</span>.<span style=color:#a6e22e>addToResourcePolicy</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>PolicyStatement</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;s3:GetObject&#39;</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resources</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>bucket</span>.<span style=color:#a6e22e>arnForObjects</span>(<span style=color:#e6db74>&#39;*&#39;</span>)],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>principals</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span>  <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>CanonicalUserPrincipal</span>(<span style=color:#a6e22e>cloudfrontOAI</span>.<span style=color:#a6e22e>cloudFrontOriginAccessIdentityS3CanonicalUserId</span>)]
</span></span><span style=display:flex><span>}));</span></span></code></pre></div><p>Now the bucket is completely ready we can create the CloudFront distribution where we will use this bucket as an origin source and configure the origin access identity to ensure everybody is up to date on what is allowed.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>distribution</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>cloudfront</span>.<span style=color:#a6e22e>CloudFrontWebDistribution</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#39;StaticWebsiteDistribution&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>originConfigs</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>s3OriginSource</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>s3BucketSource</span>: <span style=color:#66d9ef>bucket</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>originAccessIdentity</span>: <span style=color:#66d9ef>cloudfrontOAI</span>
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>behaviors</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>isDefaultBehavior</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>compress</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>allowedMethods</span>: <span style=color:#66d9ef>cloudfront.CloudFrontAllowedMethods.GET_HEAD_OPTIONS</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>});</span></span></code></pre></div><p>While all the services are now in place within AWS there is only one part missing, how do we get our files in the s3 bucket? This is something that I thought was annoying to deal with but I was completely wrong! In the AWS CDK, there is this beautiful library called <code>aws-s3-deployment</code> which can automate the deployment from the CDK template.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>new</span> <span style=color:#a6e22e>s3deploy</span>.<span style=color:#a6e22e>BucketDeployment</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#39;DeployWithInvalidation&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sources</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>s3deploy</span>.<span style=color:#a6e22e>Source</span>.<span style=color:#a6e22e>asset</span>(<span style=color:#e6db74>&#39;./static&#39;</span>)],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>destinationBucket</span>: <span style=color:#66d9ef>bucket</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>distribution</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>distributionPaths</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;/*&#39;</span>],
</span></span><span style=display:flex><span>});</span></span></code></pre></div><p>Here you&rsquo;ll see all the pieces coming together. We are deploying our files from the static folder to our specified bucket and because we are mentioning our CloudFront distribution the deployment will automatically take care of invalidating the caching of these files.</p><h2 id=interesting-learnings>Interesting learnings
<span><a href=#interesting-learnings><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>A couple of things that I found really interesting is that while using Amazon CloudFront the most important statistic is of course your cache hit/miss ratio. When the percentage of misses is too high there is probably something wrong with your setup. However, in my initial deployment, I had a lot of errors in the CloudFront console. The reason behind it was that I was missing a favicon.ico in the static website. This was a logical result of requesting the website from the browser, on every request the browser would try to retrieve the favicon to display in the tab bar. Just for that statistic alone, my advice would be, just add a favicon to the website and never think about it again.</p><h2 id=closing-note>Closing note
<span><a href=#closing-note><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>This is the easiest way to get started with a serverless website. It&rsquo;s fairly simple to set up but covers the basics of what you need to know and how to progress in the world of serverless. However, this is by far not the production-ready state you want to run your application. For starters, you should use your own domain instead of the *.cloudfront.net endpoint and that would give you some extra work with configuring Route53 + SSL Certificate (in combination with CloudFront of course).</p><p>Besides that, at the current source code, it is necessary to deploy every change yourself. This is not something you want, it would be much nicer to have this in an automated pipeline in for example AWS CodePipeline or my preferred way of deploying which is with GitHub Actions.</p><p>In the next post, I&rsquo;ll be talking about how to set up your GitHub repository to deploy on every update!</p><p>Github: <a href=https://github.com/cino/cdk-static-serverless/tree/initial-static-website>https://github.com/cino/cdk-static-serverless/tree/initial-static-website</a></p></div><div class=post-info><div class="post-date dt-published">2022-02-11</div><a class="post-hidden-url u-url" href=https://cino.github.io/posts/static-website-distribution-with-aws-cloudfront/>https://cino.github.io/posts/static-website-distribution-with-aws-cloudfront/</a>
<a href=https://cino.github.io class="p-name p-author post-hidden-author h-card" rel=me>Ricardo Cino</a><div class=post-taxonomies><ul class=post-tags><li><a href=https://cino.github.io/tags/aws/>#aws</a></li><li><a href=https://cino.github.io/tags/serverless/>#serverless</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/deploying-your-static-website/>Deploying your static website with a Github Action</a></div><div class="right pagination-item"><a href=/posts/optimizing-php-fpm/>Optimizing PHP-FPM</a></div></div></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>Â© Ricardo Cino, 2023<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div><button class=theme-switcher>
Dark theme</button>
<script>const STORAGE_KEY="user-color-scheme",defaultTheme="light-with-switcher";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton&&(switchButton.textContent=currentTheme=="dark"?"Light theme":"Dark theme")}function switchTheme(){currentTheme=="dark"?(localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></div><p class="h-card vcard"><a href=https://cino.github.io class="p-name u-url url fn" rel=me>Ricardo Cino</a>
/
<a class="p-email u-email email" rel=me href=mailto:ricardo@cino.io>ricardo@cino.io</a>
<img class=u-photo src=/images/me.png></p></footer></div></body></html>