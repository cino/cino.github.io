<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>Deploying your static website with a Github Action - Cino</title><meta name=description content="Authenticate GitHub with OpenID Connect to deploy your CDK project to your AWS Organization
After making an AWS CDK project one of the first thing you will realize is that you don&rsquo;t want to keep running cdk deploy to update your production environment. This is a fine way of working when you modify your personal dev environment as it is a quick way of deploying but definitely not for your staging/production environments."><link rel=icon type=image/x-icon href=https://cino.github.io/favicon.ico><link rel=apple-touch-icon-precomposed href=https://cino.github.io/favicon.png><style>body{visibility:hidden;opacity:0}</style><noscript><style>body{visibility:visible;opacity:1}</style></noscript><link rel=stylesheet href=https://cino.github.io/css/style.min.aac3b3a2a3235d20a652d9ccde7ec59be09f74c45de387513f681d02f3912b95.css integrity="sha256-qsOzoqMjXSCmUtnM3n7Fm+CfdMRd44dRP2gdAvORK5U="><script src=https://cino.github.io/js/script.min.74bf1a3fcf1af396efa4acf3e660e876b61a2153ab9cbe1893ac24ea6d4f94ee.js type=text/javascript integrity="sha256-dL8aP88a85bvpKzz5mDodrYaIVOrnL4Yk6wk6m1PlO4="></script><meta property="og:title" content="Deploying your static website with a Github Action"><meta property="og:description" content="Authenticate GitHub with OpenID Connect to deploy your CDK project to your AWS Organization
After making an AWS CDK project one of the first thing you will realize is that you don&rsquo;t want to keep running cdk deploy to update your production environment. This is a fine way of working when you modify your personal dev environment as it is a quick way of deploying but definitely not for your staging/production environments."><meta property="og:type" content="article"><meta property="og:url" content="https://cino.github.io/posts/deploying-your-static-website/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-18T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploying your static website with a Github Action"><meta name=twitter:description content="Authenticate GitHub with OpenID Connect to deploy your CDK project to your AWS Organization
After making an AWS CDK project one of the first thing you will realize is that you don&rsquo;t want to keep running cdk deploy to update your production environment. This is a fine way of working when you modify your personal dev environment as it is a quick way of deploying but definitely not for your staging/production environments."></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=header-top><h1 class=site-title><a href=/>Cino</a></h1><ul class=social-icons><li><a href=https://github.com/cino title=Github rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></li><li><a href=https://twitter.com/ricardocino title=Twitter rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a></li><li><a href=https://cino.github.io/index.xml title=RSS rel=me><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></span></a></li></ul></div><nav><a href=https://cino.github.io/ title=Home>Home</a>
<a href=https://cino.github.io/about/ title="About me">About me</a></nav></header><main id=main tabindex=-1><article class="post h-entry"><div class=post-header><header><h1 class="p-name post-title">Deploying your static website with a Github Action</h1></header></div><div class="content e-content"><p>Authenticate GitHub with OpenID Connect to deploy your CDK project to your AWS Organization</p><p>After making an AWS CDK project one of the first thing you will realize is that you don&rsquo;t want to keep running cdk deploy to update your production environment. This is a fine way of working when you modify your personal dev environment as it is a quick way of deploying but definitely not for your staging/production environments.</p><p>To deploy to these types of environments you should be using some kind of a ci/cd setup. There are lots of different tools you can choose from like <a href=https://aws.amazon.com/codedeploy/ target=_blank>AWS CodeDeploy,</a> <a href=https://docs.gitlab.com/ee/ci/pipelines/ target=_blank>GitLab Pipelines</a>, Jenkins (don&rsquo;t), or my absolute favorite at this moment <a href=https://github.com/features/actions target=_blank>Github Actions</a>.</p><p>When you think about how the deployment should work it&rsquo;s actually quite simple. The only thing that should happen is that the commands you&rsquo;re running by yourself should be run by an automated process. However, this is where we find our biggest problem: we are not authenticated in our GitHub Action (for now).</p><h2 id=how-to-authenticate-the-github-action>How to authenticate the GitHub Action?
<span><a href=#how-to-authenticate-the-github-action><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>There is more than a single way to authenticate your GitHub action to manage your AWS resources, however, there is only one that is actually recommended by AWS. This is the OpenID Connect authentication method. When using this we authenticate GitHub to assume a role within an organization, when GitHub is authorized to do so it will request temporary credentials which can be used to execute command-line executions like the CDK.</p><p>The other option would be to generate long-loving access keys and store these in your repositories secrets, this is not the way you want to go and I&rsquo;m not sure why I&rsquo;m even telling this.</p><p><strong>ðŸ’¡ Avoid using Long-living-access keys completely, you don&rsquo;t want to deal with refreshing these keys in the long run.</strong></p><h2 id=setting-op-github-openid-connect-with-aws>Setting op Github OpenID Connect with AWS.
<span><a href=#setting-op-github-openid-connect-with-aws><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Before we can make our GitHub Action which executes our deployment we will need to allow GitHub to our AWS Organization. This can be done by setting up an Identity Provider for GitHub within the IAM settings.</p><p>There is an excellent guide on how to configure the OpenID Identity Provider in the <a href=https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services target=_blank>GitHub documentation</a>. This includes all the information you should need to configure it correctly and make it work.</p><p>As shown in my earlier post about the <a href=/posts/static-website-distribution-with-aws-cloudfront/>static website</a> I find it important to have all my infrastructure as code, that&rsquo;s why I&rsquo;ll show how I&rsquo;ve configured the OpenID Connect Provider in a CDK Stack.</p><p>For starters, we would need to make an OpenID Connect Provider in AWS, this can be done with the IAM library of the CDK. As mentioned on the GitHub documentation you need to configure the URL and the &ldquo;Audience&rdquo;, when using the CDK you&rsquo;ll see there is no &ldquo;Audience&rdquo; property to configure. This is because this has been named &ldquo;clientIds&rdquo; and works the exact same.</p><p>Finally, we create an OpenIDConnectPrincipal which will allow GitHub to communicate with our AWS.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gitHubProvider</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>OpenIdConnectProvider</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#39;GithubProvider&#39;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;https://token.actions.githubusercontent.com&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>clientIds</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;sts.amazonaws.com&#39;</span>],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>thumbprints</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;6938fd4d98bab03faadb97b34396831e3780aea1&#39;</span>,
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>gitHubPrincipal</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>OpenIdConnectPrincipal</span>(<span style=color:#a6e22e>gitHubProvider</span>);</span></span></code></pre></div><p>The thumbprint is the latest according to this <a href=https://github.blog/changelog/2022-01-13-github-actions-update-on-oidc-based-deployments-to-aws/>GitHub blog</a> post.</p><p>Next up, we are going to define what roles GitHub can use, this is an important step as you want to explicitly tell when GitHub should be allowed to assume the given role.</p><p>Here we create a new role that includes an important condition, here we only allow GitHub to assume this role when the repository is my specific repository and even only from a specific branch. If you don&rsquo;t set this up correctly it could be possible someone else could enter your account.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deploymentRole</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>Role</span>(<span style=color:#66d9ef>this</span>, <span style=color:#e6db74>&#34;DeploymentRole&#34;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>assumedBy</span>: <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>WebIdentityPrincipal</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gitHubProvider</span>.<span style=color:#a6e22e>openIdConnectProviderArn</span>,
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>StringLike</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;token.actions.githubusercontent.com:sub&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>          <span style=color:#e6db74>`repo:cino/cdk-static-serverless:ref:refs/heads/main`</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>managedPolicies</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>iam</span>.<span style=color:#a6e22e>ManagedPolicy</span>.<span style=color:#a6e22e>fromAwsManagedPolicyName</span>(<span style=color:#e6db74>&#34;AdministratorAccess&#34;</span>),
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>});</span></span></code></pre></div><p>Here you can see that we allow the OpenIdConnectProvider to assume the created role, and for this example, I&rsquo;ve given the role the AdministratorAccess role.</p><p><strong>ðŸ’¡ Don&rsquo;t give any role AdministratorAccess in production, this is only for the given example. You should create your own policy and specify exactly what you need to be able to accomplish.</strong></p><h2 id=creating-the-github-action-to-execute-the-deploy>Creating the Github Action to execute the deploy
<span><a href=#creating-the-github-action-to-execute-the-deploy><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>Now we have authenticated GitHub and can actually execute actions within our AWS account we can go ahead and create a GitHub action to deploy our existing Stack. For this, I&rsquo;ve updated the existing <a href=https://github.com/cino/cdk-static-serverless>Static Website</a> repository that I created during the previous blog post and made the action run. The complete action can be found at <a hreef=https://github.com/cino/cdk-static-serverless/blob/main/.github/workflows/deploy.yml>this location</a>.</p><p>We are lucky enough that the authentication part of our GitHub action has completely been automated by AWS and we simply need to use an existing GitHub action. This is the <a herf=https://github.com/aws-actions/configure-aws-credentials>aws-actions/configure-aws-credentials</a> action that can authenticate your action in multiple ways.</p><p>In our Action, we need to add the following part right after checking out our code and everything after this action will be authenticated to perform actions in the AWS Organization. As you can see we specify which role you want to assume and this needs to be the ARN of the created role.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Configure AWS credentials</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>aws-actions/configure-aws-credentials@v1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>role-to-assume</span>: <span style=color:#ae81ff>${{ secrets.AWS_ROLE_TO_ASSUME }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>aws-region</span>: <span style=color:#ae81ff>eu-central-1</span></span></span></code></pre></div><p>Now we are authenticated we can do anything necessary to update our stack, for the given example I&rsquo;ve kept it as simple as possible to make it work by just setting up Node with the managed action from GitHub.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Node</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v2</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>node-version</span>: <span style=color:#ae81ff>14</span></span></span></code></pre></div><p>This will install node and npm in our action which we will need to install the dependencies which will be the next step.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dependencies</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npm ci</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy to CloudFront/S3</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>run</span>: <span style=color:#ae81ff>npx cdk deploy --require-approval never</span></span></span></code></pre></div><p>These are the last 2 steps of our action, first, our npm dependencies are installed by running <code>npm ci</code>, and second, we will run the <code>cdk deploy</code> command by prefixing this with npx. Npx will download the CDK library and add it to our path so we can use the executable.</p><h2 id=thats-a-wrap>That&rsquo;s a wrap
<span><a href=#thats-a-wrap><svg viewBox="0 0 28 23" height="100%" width="19" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/></svg></a></span></h2><p>When all this has been set up you should be able to deploy the CDK project right into your AWS account while using a correct authentication method, without keys that you need to replace every x months. To see the results you can see the output of <a href="https://github.com/cino/cdk-static-serverless/runs/5272810000?check_suite_focus=true">this workflow</a> that is.</p></div><div class=post-info><div class="post-date dt-published">2022-02-18</div><a class="post-hidden-url u-url" href=https://cino.github.io/posts/deploying-your-static-website/>https://cino.github.io/posts/deploying-your-static-website/</a>
<a href=https://cino.github.io class="p-name p-author post-hidden-author h-card" rel=me>Ricardo Cino</a><div class=post-taxonomies></div></div></article><div class="pagination post-pagination"><div class="left pagination-item"><a href=/posts/temporarily-working-on-a-windows-laptop/>Temporarily working on a Windows Laptop</a></div><div class="right pagination-item"><a href=/posts/static-website-distribution-with-aws-cloudfront/>Static website distribution with AWS CloudFront</a></div></div></main><footer class=common-footer><div class=common-footer-bottom><div class=copyright><p>Â© Ricardo Cino, 2023<br>Powered by <a target=_blank rel="noopener noreferrer" href=https://gohugo.io/>Hugo</a>, theme <a target=_blank rel="noopener noreferrer" href=https://github.com/mitrichius/hugo-theme-anubis>Anubis</a>.<br></p></div><button class=theme-switcher>
Dark theme</button>
<script>const STORAGE_KEY="user-color-scheme",defaultTheme="light-with-switcher";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),switchButton&&(changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)),showContent()});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton&&(switchButton.textContent=currentTheme=="dark"?"Light theme":"Dark theme")}function switchTheme(){currentTheme=="dark"?(localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}function showContent(){document.body.style.visibility="visible",document.body.style.opacity=1}</script></div><p class="h-card vcard"><a href=https://cino.github.io class="p-name u-url url fn" rel=me>Ricardo Cino</a>
/
<a class="p-email u-email email" rel=me href=mailto:ricardo@cino.io>ricardo@cino.io</a>
<img class=u-photo src=/images/me.png></p></footer></div></body></html>