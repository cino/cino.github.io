<!doctype html><html class="h-full antialiased" style=--header-position:sticky;--content-offset:0px;--header-height:64px;--header-mb:0px;--header-top:0px;--avatar-top:0px lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Testing in a serverless environment - Cino</title><link rel=canonical href=https://cino.io/2025/testing-in-serverless-environment/><link rel=alternate type=application/rss+xml title=RSS href=https://cino.io/index.xml><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://cino.io/2025/testing-in-serverless-environment/"><meta property="og:site_name" content="Cino"><meta property="og:title" content="Testing in a serverless environment"><meta property="og:description" content="Working in a pure serverless environment presents a distinct set of challenges when testing your software, particularly when multiple services interact with each other. In this post, I will explore some strategies for testing in a serverless environment."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2025"><meta property="article:published_time" content="2025-08-22T14:01:00+01:00"><meta property="article:modified_time" content="2025-08-22T14:01:00+01:00"><meta property="article:tag" content="Aws"><meta property="article:tag" content="Serverless"><meta property="article:tag" content="Tags/Testing"><meta property="article:tag" content="Tags/Github"><meta property="article:tag" content="Tags/Github Actions"><meta property="article:tag" content="Tags/Deployment"><meta property="og:image" content="https://cino.io/2025/testing-in-serverless-environment/steps.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cino.io/2025/testing-in-serverless-environment/steps.png"><meta name=twitter:title content="Testing in a serverless environment"><meta name=twitter:description content="Working in a pure serverless environment presents a distinct set of challenges when testing your software, particularly when multiple services interact with each other. In this post, I will explore some strategies for testing in a serverless environment."><meta itemprop=name content="Testing in a serverless environment"><meta itemprop=description content="Working in a pure serverless environment presents a distinct set of challenges when testing your software, particularly when multiple services interact with each other. In this post, I will explore some strategies for testing in a serverless environment."><meta itemprop=datePublished content="2025-08-22T14:01:00+01:00"><meta itemprop=dateModified content="2025-08-22T14:01:00+01:00"><meta itemprop=wordCount content="1101"><meta itemprop=image content="https://cino.io/2025/testing-in-serverless-environment/steps.png"><meta itemprop=keywords content="Aws,Serverless,Tags/Testing,Tags/Github,Tags/Github Actions,Tags/Deployment,Tags/Unit Testing,Tags/Integration Testing,Tags/Infra Testing,Tags/Self-Hosted-Runners"><link rel=stylesheet href=/css/styles.82e250eb625d59ab7aaae32486e8e02e3cc28adbe8ec9695d8343e4e4ebe840f.css integrity="sha256-guJQ62JdWat6quMkhujgLjzCitvo7JaV2DQ+Tk6+hA8=" crossorigin=anonymous><meta name=fediverse:creator content="@cino@fosstodon.org"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GCGJ9S1XSX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GCGJ9S1XSX")}</script></head><body class="flex h-full flex-col bg-zinc-50"><div class="fixed inset-0 flex justify-center sm:px-8"><div class="flex w-full max-w-7xl lg:px-8"><div class="w-full bg-white ring-1 ring-zinc-100"></div></div></div><div class=relative><header class="pointer-events-none relative z-50 flex flex-col" style=height:var(--header-height);margin-bottom:var(--header-mb)><div class="top-0 z-10 h-16 pt-6" style=position:var(--header-position)><div class="sm:px-8 top-(--header-top,--spacing(6)) w-full" style=position:var(--header-inner-position)><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="relative flex gap-4"><div class="flex flex-1"><div class="h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur-sm"><a aria-label=Home class=pointer-events-auto href=https://cino.io/><img alt sizes=2.25rem src=/img/ricardo-cino-36x36.png decoding=async data-nimg=1 class="rounded-full bg-zinc-100 object-cover h-9 w-9" style=color:transparent width=512 height=512 alt="Ricardo Cino"></a></div></div><div class="relative flex justify-end flex-1"><div class="mt-2 flex gap-6"><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on Bluesky" href=https://bsky.app/profile/cino.io target=_blank><svg viewBox="0 0 24 24" width="24" height="24" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path style="stroke:none;fill-rule:nonzero" d="M4.550781 2.792969c2.410157 1.773437 5 5.371093 5.949219 7.296875V15.1875C10.5 15.078125 10.457031 15.203125 10.367188 15.464844 9.871094 16.894531 7.929688 22.476562 3.5 18.015625c-2.332031-2.351563-1.253906-4.699219 2.996094-5.40625-2.429688.40625-5.164063-.265625-5.914063-2.894531C.367188 8.960938.0 4.304688.0 3.675781.0.523438 2.816406 1.515625 4.550781 2.792969zm11.898438.0c-2.410157 1.773437-5 5.371093-5.949219 7.296875V15.1875C10.5 15.078125 10.542969 15.203125 10.632812 15.464844 11.128906 16.894531 13.070312 22.476562 17.5 18.015625c2.332031-2.351563 1.253906-4.699219-2.996094-5.40625 2.429688.40625 5.164063-.265625 5.914063-2.894531C20.632812 8.960938 21 4.304688 21 3.675781c0-3.152343-2.816406-2.160156-4.550781-.882812zm0 0"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on Mastodon" href=https://fosstodon.org/@cino rel=me target=_blank><svg viewBox="0 0 16 16" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path fill="#828282" d="M15.659 9.592C15.424 10.72 13.553 11.956 11.404 12.195 10.283 12.32 9.18 12.434 8.003 12.384 6.079 12.302 4.56 11.956 4.56 11.956 4.56 12.13 4.572 12.297 4.595 12.452c.25 1.772 1.883 1.878 3.43 1.927C9.586 14.429 10.976 14.02 10.976 14.02L11.04 15.337S9.948 15.884 8.003 15.984C6.93 16.039 5.598 15.959 4.047 15.576.683 14.746.104 11.4.015 8.006-.012 6.998.005 6.048.005 5.253.005 1.782 2.443.765 2.443.765 3.672.238 5.782.017 7.975.0H8.029c2.192.017 4.303.238 5.532.765.0.0 2.438 1.017 2.438 4.488.0.0.0310000000000006 2.561-.34 4.339zm-2.535-4.07V9.725H11.339V5.646c0-.86-.388-1.296-1.164-1.296C9.317 4.35 8.887 4.867 8.887 5.891V8.124H7.113V5.891C7.113 4.867 6.683 4.35 5.825 4.35c-.776.0-1.164.436-1.164 1.296V9.725H2.876V5.522c0-.859.235-1.541.706-2.046.485-.505 1.121-.764 1.911-.764C6.406 2.712 7.098 3.039 7.555 3.695L8 4.39l.445-.695C8.902 3.039 9.594 2.712 10.507 2.712 11.297 2.712 11.933 2.971 12.418 3.476 12.889 3.981 13.124 4.663 13.124 5.522z" style="stroke:none;stroke-miterlimit:10;fill-rule:evenodd"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on GitHub" href=https://github.com/cino target=_blank><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487.0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062.0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717.0.0.837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346s1.7.115 2.5.346c1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756.0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897.0 1.371-.013 2.473-.013 2.82.0.268.188.589.688.486a10.039 10.039.0 004.932-3.74A10.447 10.447.0 0022 12.253C22 6.588 17.525 2 12 2z"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on LinkedIn" href=https://www.linkedin.com/in/cinoricardo/ target=_blank><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path d="M18.335 18.339H15.67v-4.177c0-.996-.02-2.278-1.39-2.278-1.389.0-1.601 1.084-1.601 2.205v4.25h-2.666V9.75h2.56v1.17h.035c.358-.674 1.228-1.387 2.528-1.387 2.7.0 3.2 1.778 3.2 4.091v4.715zM7.003 8.575A1.546 1.546.0 015.455 7.026a1.548 1.548.0 111.547 1.549zm1.336 9.764H5.666V9.75H8.34v8.589zM19.67 3H4.329C3.593 3 3 3.58 3 4.297v15.406C3 20.42 3.594 21 4.328 21h15.338C20.4 21 21 20.42 21 19.703V4.297C21 3.58 20.4 3 19.666 3h.003z"/></svg></a></div></div></div></div></div></div></div></div></header><main><div class="sm:px-8 mt-16 lg:mt-32"><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class=xl:relative><div class="mx-auto max-w-2xl"><a href=/ aria-label="Go back to articles" class="group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0"><svg viewBox="0 0 16 16" fill="none" aria-hidden="true" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"><path d="M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a><article><header class="flex flex-col"><time datetime=2025-08-22 class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500"><span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
<span class=ml-3>August 22, 2025</span>
<span class="h-4 ml-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
<span class=ml-3>6 min read</span></time><div class="relative mt-4 text-zinc-400"><a href=/tags/aws/ class=hover:text-zinc-200>#aws</a>, <a href=/tags/serverless/ class=hover:text-zinc-200>#serverless</a>, <a href=/tags/testing/ class=hover:text-zinc-200>#testing</a>, <a href=/tags/github/ class=hover:text-zinc-200>#github</a>, <a href=/tags/github-actions/ class=hover:text-zinc-200>#github actions</a>, <a href=/tags/deployment/ class=hover:text-zinc-200>#deployment</a>, <a href=/tags/unit-testing/ class=hover:text-zinc-200>#unit testing</a>, <a href=/tags/integration-testing/ class=hover:text-zinc-200>#integration testing</a>, <a href=/tags/infra-testing/ class=hover:text-zinc-200>#infra testing</a>, <a href=/tags/self-hosted-runners/ class=hover:text-zinc-200>#self-hosted-runners</a></div><h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl">Testing in a serverless environment</h1></header><div class="mt-8 prose dark:prose-invert"><p>Working in a pure serverless environment presents a distinct set of challenges when testing your software, particularly when multiple services interact with each other. In this post, I will explore some strategies for testing in a serverless environment.</p><h2 id=types-of-testing>Types of testing</h2><p>When it comes to testing, there are different types of tests that you can implement in your software development lifecycle. Here are some of the most common types of tests:</p><ul><li><strong>Unit tests</strong>: These tests focus on individual components or functions of your codebase, ensuring that each part works as intended in isolation.</li><li><strong>Integration tests</strong>: These tests evaluate how different components of your application work together, verifying that they interact correctly and produce the expected results.</li><li><strong>Infrastructure tests</strong>: Tests to confirm that the infrastructure outputs the expected results and behaves as intended.</li><li><strong>End-to-end tests</strong>: These tests simulate real user scenarios, testing the entire application stack from the frontend to the backend, including all external dependencies.</li></ul><p>What we are going to focus on is primarily <strong>integration tests</strong>, which verify the interactions between different services in a serverless architecture.</p><h3 id=unit-testing>Unit testing</h3><p>Before we continue to integration tests it&rsquo;s important to mention that in my current environment <strong>everything</strong> is unit tested and we aim towards a high 90% test coverage on our codebase, obviously test coverage is not the end goal and you should properly think about what you are testing.</p><p>The reason we focus so much on unit testing is that these are the cheapest and fastest tests to execute. We test every path of our code with unit tests to ensure the results are as we expect them. We do this in the unit test to ensure we can build many tests, and run them locally fast while still building the integration tests to make sure they run in the cloud.</p><h3 id=integration-testing>Integration testing</h3><p>The fun part, how do you properly test your serverless application and why is it so important? The challenge with serverless is that, besides having your own codebase, there are many different parts of infrastructure that you need to consider, such as API gateways, lambdas, databases, queues, you name it. When you have all these different parts working together, there is one thing that unit tests will really not cover: the authorization between these components.</p><ul><li>Can your lambda reach the database?</li><li>Does it have permissions to access the database?</li><li>Do you have the correct IAM Permission to send messages to SQS?</li></ul><p><strong>So how do we test this?</strong></p><p>To make sure we can safely test our serverless application, we can do a number of things; You can use a tool like <a href=https://www.localstack.cloud/ target=_blank>LocalStack</a>, which I haven&rsquo;t done before but surely am looking at for a next adventure. Or, you can spin up a full environment for your change request and execute tests against your new environment.</p><p><img src=steps.png alt=diagram></p><p>What we like to do in our project is, on each pull request, we deploy a completely new environment prefixed with <code>pr-{pr-number}</code>. This does take a while to complete, based on all the resources that you&rsquo;ll be deploying, but it will be worth your while.</p><p>Once this is done, we start tests, which will:</p><ul><li>Directly invoke our API&rsquo;s and expect a specific response. This will prove that the lambda behind our api can execute what is necessary and that the API Gateway is configured correctly.</li><li>Push messages directly into queues or event buses, and we&rsquo;ll wait until a result has appeared in a database or S3 bucket.</li></ul><p>This gives us great confidence that the software that we deploy can be executed with the right permissions and configuration in place.</p><p>In comparison to the unit tests, in the integration tests, we do not test all paths, as these have been covered by the unit tests. What we do test is making sure that each external service (database/queue/other service needing specific configuration) is working as expected. In some cases, that is a single test; if there is a non-default path where a message goes to a specific queue or database, there will be a second test, and so on.</p><h2 id=infrastructure-tests>Infrastructure tests</h2><p>A part from testing your code, you also want to make sure that your infrastructure is creating the resources as you expect. As such, you should include tests that validate the infrastructure itself. This can include checking that the correct number of resources have been created, that they are configured correctly, and that they have the right permissions (I know, this sounds double compared to integration tests, but think of it as layers of tests).</p><p>When working with AWS CDK you can do this in multiple manners, for one you can use <a href=https://docs.aws.amazon.com/cdk/v2/guide/testing.html#testing-snapshot target=_blank>Snapshot tests</a> which capture the current state of your infrastructure and compare it to a state you previously stored inside the repository, this is useful for quick assertions on IF anything has changed and forces you to update the snapshot when you do.</p><p>Or you can use my favourite; <a href=https://docs.aws.amazon.com/cdk/v2/guide/testing.html#testing-fine-grained target=_blank>fine-grained assertions</a>, with this you can specifically check if the output of your CDK App matches your expectations. For example if the Lambda environment has a correct reference to a SSM Parameter, or if the Lambda function has the correct memory configured that is required to execute correctly.</p><h2 id=private-testing>Private testing</h2><p>If you are a frequent reader of my blog, it must come as no surprise that I am a big advocate for building private architecture when you can. This, however, will give you an additional challenge if you are deploying all your resources in a private network and trying to run an end-to-end test in your CI/CD pipeline.</p><p>When working with GitHub Actions, for example, in a default workflow, your tests will be running in a GitHub runner, which would not have any access to your private network. To overcome this limitation, you can use <a href=https://docs.github.com/en/actions/concepts/runners/self-hosted-runners target=_blank>self-hosted</a> runners that are deployed within your private network. In our company, this is provided out-of-the-box by the Cloud Center of Excellence, and there is a <a href=https://medium.com/postnl-engineering/building-scalable-ci-cd-pipelines-with-self-hosted-github-actions-on-amazon-codebuild-6a82150a3eb2 target=_blank>great article</a> about it written by a colleague at PostNL and fellow AWS Community Builder <a href=https://awsbythebook.com/ target=_blank>Matheus das Mercês</a>.</p><h2 id=conclusion>Conclusion</h2><p>As you can see, testing your software in a serverless environment can be challenging, but with the right strategies and tools, you can ensure that your application is working as expected. By implementing a combination of unit tests, integration tests, infrastructure tests, and end-to-end tests, you can build a robust testing strategy that will help you catch issues early and ensure that your application is reliable and scalable.</p>I hope this post was helpful to you and if you have any questions or remarks feel free to reach out to me on <a href=https://bsky.app/profile/cino.io target=_blank>Bluesky</a> or <a href=https://www.linkedin.com/in/cinoricardo/ target=_blank>LinkedIn</a>.</div></article></div></div></div></div></div></div></main><footer class=mt-32><div class=sm:px-8><div class="mx-auto max-w-7xl lg:px-8"><div class="border-t border-zinc-100 pt-10 pb-16 0"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="flex flex-col items-center justify-between gap-6 sm:flex-row"><div class="flex gap-6 text-sm font-medium text-zinc-800"><a class="transition hover:text-teal-500" href=/>Home</a></div><p class="text-sm text-zinc-400">© 2025 Cino Consultancy<br><span class=text-xs>KVK: 89913019</span></p></div></div></div></div></div></div></footer></div></body></html>