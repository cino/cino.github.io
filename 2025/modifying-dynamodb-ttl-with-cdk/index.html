<!doctype html><html class="h-full antialiased" style=--header-position:sticky;--content-offset:0px;--header-height:64px;--header-mb:0px;--header-top:0px;--avatar-top:0px lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Modifying DynamoDB TTL with CDK - Cino</title><link rel=canonical href=https://cino.io/2025/modifying-dynamodb-ttl-with-cdk/><link rel=alternate type=application/rss+xml title=RSS href=https://cino.io/index.xml><link rel=apple-touch-icon sizes=57x57 href=/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://cino.io/2025/modifying-dynamodb-ttl-with-cdk/"><meta property="og:site_name" content="Cino"><meta property="og:title" content="Modifying DynamoDB TTL with CDK"><meta property="og:description" content="Ever tried to update the TTL attribute of a DynamoDB table using the AWS CDK and got a InvalidRequest in CDK or a ValidationException via the CLI? I did, and it took me a while to figure out why. In this post, I’ll explain what happened and how to avoid the same issue in the future. This is a short post, but I think it’s worth sharing because it can save you some time and frustration."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="2025"><meta property="article:published_time" content="2025-03-22T12:00:40+01:00"><meta property="article:modified_time" content="2025-03-22T12:00:40+01:00"><meta property="article:tag" content="Aws"><meta property="article:tag" content="Amazon Web Services"><meta property="article:tag" content="Dynamodb"><meta property="article:tag" content="Tags/Ttl"><meta property="article:tag" content="Tags/Time to Live"><meta property="article:tag" content="Cdk"><meta name=twitter:card content="summary"><meta name=twitter:title content="Modifying DynamoDB TTL with CDK"><meta name=twitter:description content="Ever tried to update the TTL attribute of a DynamoDB table using the AWS CDK and got a InvalidRequest in CDK or a ValidationException via the CLI? I did, and it took me a while to figure out why. In this post, I’ll explain what happened and how to avoid the same issue in the future. This is a short post, but I think it’s worth sharing because it can save you some time and frustration."><meta itemprop=name content="Modifying DynamoDB TTL with CDK"><meta itemprop=description content="Ever tried to update the TTL attribute of a DynamoDB table using the AWS CDK and got a InvalidRequest in CDK or a ValidationException via the CLI? I did, and it took me a while to figure out why. In this post, I’ll explain what happened and how to avoid the same issue in the future. This is a short post, but I think it’s worth sharing because it can save you some time and frustration."><meta itemprop=datePublished content="2025-03-22T12:00:40+01:00"><meta itemprop=dateModified content="2025-03-22T12:00:40+01:00"><meta itemprop=wordCount content="800"><meta itemprop=keywords content="Aws,Amazon Web Services,Dynamodb,Tags/Ttl,Tags/Time to Live,Cdk,Tags/Error,Tags/ValidationException,Tags/UpdateTimeToLive,Tags/InvalidRequest,Errors"><link rel=stylesheet href=/css/styles.76fc68452d18f36a69152f3dbb34e89572b4ff0c95e50aaa17bd44cfe5ae32a4.css integrity="sha256-dvxoRS0Y82ppFS89uzTolXK0/wyV5QqqF71Ez+WuMqQ=" crossorigin=anonymous><meta name=fediverse:creator content="@cino@fosstodon.org"><script async src="https://www.googletagmanager.com/gtag/js?id=G-GCGJ9S1XSX"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GCGJ9S1XSX")}</script></head><body class="flex h-full flex-col bg-zinc-50"><div class="fixed inset-0 flex justify-center sm:px-8"><div class="flex w-full max-w-7xl lg:px-8"><div class="w-full bg-white ring-1 ring-zinc-100"></div></div></div><div class=relative><header class="pointer-events-none relative z-50 flex flex-col" style=height:var(--header-height);margin-bottom:var(--header-mb)><div class="top-0 z-10 h-16 pt-6" style=position:var(--header-position)><div class="sm:px-8 top-(--header-top,--spacing(6)) w-full" style=position:var(--header-inner-position)><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="relative flex gap-4"><div class="flex flex-1"><div class="h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur-sm"><a aria-label=Home class=pointer-events-auto href=https://cino.io/><img alt sizes=2.25rem src=/img/ricardo-cino-36x36.png decoding=async data-nimg=1 class="rounded-full bg-zinc-100 object-cover h-9 w-9" style=color:transparent width=512 height=512 alt="Ricardo Cino"></a></div></div><div class="relative flex justify-end flex-1"><div class="mt-2 flex gap-6"><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on Bluesky" href=https://bsky.app/profile/cino.io target=_blank><svg viewBox="0 0 24 24" width="24" height="24" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path style="stroke:none;fill-rule:nonzero" d="M4.550781 2.792969c2.410157 1.773437 5 5.371093 5.949219 7.296875V15.1875C10.5 15.078125 10.457031 15.203125 10.367188 15.464844 9.871094 16.894531 7.929688 22.476562 3.5 18.015625c-2.332031-2.351563-1.253906-4.699219 2.996094-5.40625-2.429688.40625-5.164063-.265625-5.914063-2.894531C.367188 8.960938.0 4.304688.0 3.675781.0.523438 2.816406 1.515625 4.550781 2.792969zm11.898438.0c-2.410157 1.773437-5 5.371093-5.949219 7.296875V15.1875C10.5 15.078125 10.542969 15.203125 10.632812 15.464844 11.128906 16.894531 13.070312 22.476562 17.5 18.015625c2.332031-2.351563 1.253906-4.699219-2.996094-5.40625 2.429688.40625 5.164063-.265625 5.914063-2.894531C20.632812 8.960938 21 4.304688 21 3.675781c0-3.152343-2.816406-2.160156-4.550781-.882812zm0 0"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on Mastodon" href=https://fosstodon.org/@cino rel=me target=_blank><svg viewBox="0 0 16 16" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path fill="#828282" d="M15.659 9.592C15.424 10.72 13.553 11.956 11.404 12.195 10.283 12.32 9.18 12.434 8.003 12.384 6.079 12.302 4.56 11.956 4.56 11.956 4.56 12.13 4.572 12.297 4.595 12.452c.25 1.772 1.883 1.878 3.43 1.927C9.586 14.429 10.976 14.02 10.976 14.02L11.04 15.337S9.948 15.884 8.003 15.984C6.93 16.039 5.598 15.959 4.047 15.576.683 14.746.104 11.4.015 8.006-.012 6.998.005 6.048.005 5.253.005 1.782 2.443.765 2.443.765 3.672.238 5.782.017 7.975.0H8.029c2.192.017 4.303.238 5.532.765.0.0 2.438 1.017 2.438 4.488.0.0.0310000000000006 2.561-.34 4.339zm-2.535-4.07V9.725H11.339V5.646c0-.86-.388-1.296-1.164-1.296C9.317 4.35 8.887 4.867 8.887 5.891V8.124H7.113V5.891C7.113 4.867 6.683 4.35 5.825 4.35c-.776.0-1.164.436-1.164 1.296V9.725H2.876V5.522c0-.859.235-1.541.706-2.046.485-.505 1.121-.764 1.911-.764C6.406 2.712 7.098 3.039 7.555 3.695L8 4.39l.445-.695C8.902 3.039 9.594 2.712 10.507 2.712 11.297 2.712 11.933 2.971 12.418 3.476 12.889 3.981 13.124 4.663 13.124 5.522z" style="stroke:none;stroke-miterlimit:10;fill-rule:evenodd"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on GitHub" href=https://github.com/cino target=_blank><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487.0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062.0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717.0.0.837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346s1.7.115 2.5.346c1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756.0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897.0 1.371-.013 2.473-.013 2.82.0.268.188.589.688.486a10.039 10.039.0 004.932-3.74A10.447 10.447.0 0022 12.253C22 6.588 17.525 2 12 2z"/></svg>
</a><a class="group -m-1 p-1 pointer-events-auto" aria-label="Follow on LinkedIn" href=https://www.linkedin.com/in/cinoricardo/ target=_blank><svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"><path d="M18.335 18.339H15.67v-4.177c0-.996-.02-2.278-1.39-2.278-1.389.0-1.601 1.084-1.601 2.205v4.25h-2.666V9.75h2.56v1.17h.035c.358-.674 1.228-1.387 2.528-1.387 2.7.0 3.2 1.778 3.2 4.091v4.715zM7.003 8.575A1.546 1.546.0 015.455 7.026a1.548 1.548.0 111.547 1.549zm1.336 9.764H5.666V9.75H8.34v8.589zM19.67 3H4.329C3.593 3 3 3.58 3 4.297v15.406C3 20.42 3.594 21 4.328 21h15.338C20.4 21 21 20.42 21 19.703V4.297C21 3.58 20.4 3 19.666 3h.003z"/></svg></a></div></div></div></div></div></div></div></div></header><main><div class="sm:px-8 mt-16 lg:mt-32"><div class="mx-auto max-w-7xl lg:px-8"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class=xl:relative><div class="mx-auto max-w-2xl"><a href=/ aria-label="Go back to articles" class="group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0"><svg viewBox="0 0 16 16" fill="none" aria-hidden="true" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"><path d="M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a><article><header class="flex flex-col"><time datetime=2025-03-22 class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500"><span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
<span class=ml-3>March 22, 2025</span>
<span class="h-4 ml-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
<span class=ml-3>4 min read</span></time><div class="relative mt-4 text-zinc-400"><a href=/tags/aws/ class=hover:text-zinc-200>#aws</a>, <a href=/tags/amazon-web-services/ class=hover:text-zinc-200>#amazon web services</a>, <a href=/tags/dynamodb/ class=hover:text-zinc-200>#dynamodb</a>, <a href=/tags/ttl/ class=hover:text-zinc-200>#ttl</a>, <a href=/tags/time-to-live/ class=hover:text-zinc-200>#time to live</a>, <a href=/tags/cdk/ class=hover:text-zinc-200>#cdk</a>, <a href=/tags/error/ class=hover:text-zinc-200>#error</a>, <a href=/tags/validationexception/ class=hover:text-zinc-200>#ValidationException</a>, <a href=/tags/updatetimetolive/ class=hover:text-zinc-200>#UpdateTimeToLive</a>, <a href=/tags/invalidrequest/ class=hover:text-zinc-200>#InvalidRequest</a>, <a href=/tags/errors/ class=hover:text-zinc-200>#errors</a></div><h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl">Modifying DynamoDB TTL with CDK</h1></header><div class="mt-8 prose dark:prose-invert"><p>Ever tried to update the TTL attribute of a DynamoDB table using the AWS CDK and got a <code>InvalidRequest</code> in CDK or a <code>ValidationException</code> via the CLI? I did, and it took me a while to figure out why. In this post, I&rsquo;ll explain what happened and how to avoid the same issue in the future. This is a short post, but I think it&rsquo;s worth sharing because it can save you some time and frustration.</p><h2 id=introduction>Introduction</h2><p>Very recently I spent a few hours trying to figure out why I was getting a <code>ValidationException</code> when trying to update the TTL attribute of a DynamoDB table using the AWS CDK. The error message was not very helpful, and I couldn&rsquo;t find any documentation that explained the issue. After some digging (and asking around on Slack), I discovered that the problem was related to the fact that the TTL attribute was already set to a different value, and I was trying to change it to a new one which is not allowed in a single deployment.</p><h2 id=modifying-dynamodb-ttl-with-cdk>Modifying DynamoDB TTL with CDK</h2><h3 id=the-errors>The Error(s)</h3><p>When you try to update the TTL attribute of a DynamoDB table using the AWS CDK, you might encounter the following error:</p><blockquote><p>Invalid request provided: Cannot change time-to-live attribute name. To update this property, you must first disable TTL then enable TTL with the new attribute name.</p></blockquote><p>For me this was a surprise and wasn&rsquo;t aware this limitation existed. Followed by this error I thought, let me try this by the CLI and see if I can update it manually before deploying the CDK Stack. So to clear up; I was trying to disable the TTL by CLI and than re-run the stack with the new TTL attribute.</p><p>Of course that didn&rsquo;t work either, because the state of the CloudFormation stack was still in the previous state. So when validating the stack it would still throw the same exact error.</p><p>Next up I thought, let&rsquo;s try to disable the TTL via the CLI and then re-enable it with the new attribute name. This is where I got the following error:</p><blockquote><p>An error occurred (ValidationException) when calling the UpdateTimeToLive operation: Time to live has been modified multiple times within a fixed interval</p></blockquote><h3 id=why-was-i-confused>Why was I confused</h3><p>To me this was a experience of surprises. I looked at the documentation and it didn&rsquo;t mention anything about this limitation. I thought I could just change the TTL attribute name and be done with it. This was mainly due to the DynamoDB CloudFormation documentation about the <code>TimeToLiveSpecification</code> property, which doesn&rsquo;t mention anything about this limitation. It actually mentions you can modify this property without any interruption on <a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html#cfn-dynamodb-table-timetolivespecification target=_blank>this page</a>.</p><p>And yes, there is a note below that saying there are limitations on DynamoDb and links to a new page, which does <em>not</em> mention the <code>TimeToLiveSpecification</code> property.</p><p>Now the second error I got was even more confusing. I was trying to disable the TTL and then re-enable it with a new attribute name, but I got an error saying that the TTL had been modified multiple times within a fixed interval. Again, this was something I hadn&rsquo;t yet spotted in any of the documentation which was a error on my side. I opened the documentation for <a href=https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_UpdateTimeToLive.html target=_blank>UpdateTimeToLive</a> and immediately scrolled down to the <code>Errors</code> section and this did not include the <code>ValidationException</code>.</p><p>However, at the top of the page that discusses the <code>UpdateTimeToLive</code> operation, it clearly states that:</p><blockquote><p>TimeToLiveSpecification. It can take up to one hour for the change to fully process. Any additional UpdateTimeToLive calls for the same table during this one hour duration result in a ValidationException.</p></blockquote><p>So, if you try to disable the TTL and then re-enable it with a new attribute name within that one hour duration, you&rsquo;ll get the <code>ValidationException</code> error.</p><h2 id=conclusion>Conclusion</h2><p>In conclusion if you use any kind of Infrastructure as code tool, like the AWS CDK, you need to be aware of this limitation when modifying the TTL attribute of a DynamoDB table. You can&rsquo;t just change the attribute name and expect it to work. You&rsquo;ll need to:</p><ol><li>Disable the TTL</li><li>Deploy the change</li><li>Wait for the change to be applied (up to one hour)</li><li>Enable the TTL with the new attribute name</li><li>Deploy the change</li><li>Wait for the change to be applied (up to one hour)</li></ol><p>In hindsight, yes I could&rsquo;ve spotted this in the documentation but I clearly didn&rsquo;t and as a result I lost multiple hours on researching but also, deploying.. and waiting for the changes to be applied. So I hope this post helps you avoid the same issue in the future.</p><h3 id=sources>Sources</h3><ul><li><a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html target=_blank>docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html</a></li><li><a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html#cfn-dynamodb-table-timetolivespecification target=_blank>docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-dynamodb-table.html#cfn-dynamodb-table-timetolivespecification</a></li><li><a href=https://awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/update-time-to-live.html target=_blank>awscli.amazonaws.com/v2/documentation/api/latest/reference/dynamodb/update-time-to-live.html</a></li></ul>I hope this post was helpful to you and if you have any questions or remarks feel free to reach out to me on <a href=https://bsky.app/profile/cino.io target=_blank>Bluesky</a> or <a href=https://www.linkedin.com/in/cinoricardo/ target=_blank>LinkedIn</a>.</div></article></div></div></div></div></div></div></main><footer class=mt-32><div class=sm:px-8><div class="mx-auto max-w-7xl lg:px-8"><div class="border-t border-zinc-100 pt-10 pb-16 0"><div class="relative px-4 sm:px-8 lg:px-12"><div class="mx-auto max-w-2xl lg:max-w-5xl"><div class="flex flex-col items-center justify-between gap-6 sm:flex-row"><div class="flex gap-6 text-sm font-medium text-rich-black"><a class="transition hover:text-dark-cyan" href=/>Home</a></div><p class="text-sm text-rich-black">© 2025 Ricardo Cino<br></p></div></div></div></div></div></div></footer></div></body></html>